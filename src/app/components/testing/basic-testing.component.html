<div class="testing-container">
  <div class="testing-header">
    <h1>Basic Financial Testing</h1>
    <p>Automated testing suite for core financial functionality</p>
  </div>

  <div class="testing-controls">
    <button 
      class="run-tests-btn" 
      (click)="runBasicTests()" 
      [disabled]="isRunningTests">
      {{ isRunningTests ? 'Running Tests...' : 'Run Basic Tests' }}
    </button>
    
    <button 
      class="clear-results-btn" 
      (click)="clearResults()" 
      [disabled]="isRunningTests">
      Clear Results
    </button>
  </div>

  <!-- Progress Bar -->
  <div class="progress-section" *ngIf="isRunningTests">
    <div class="progress-info">
      <span class="current-test">{{ currentTest }}</span>
      <span class="progress-percentage">{{ testProgress | number:'1.0-0' }}%</span>
    </div>
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="testProgress"></div>
    </div>
  </div>

  <!-- Test Results -->
  <div class="test-results" *ngIf="testResults.length > 0">
    <h2>Test Results</h2>
    
    <div class="test-summary">
      <div class="summary-item">
        <span class="summary-label">Total Tests:</span>
        <span class="summary-value">{{ testResults.length }}</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Passed:</span>
        <span class="summary-value passed">{{ getPassedTestsCount() }}</span>
      </div>
      <div class="summary-item">
        <span class="summary-label">Failed:</span>
        <span class="summary-value failed">{{ getFailedTestsCount() }}</span>
      </div>
    </div>

    <div class="test-list">
      <div 
        *ngFor="let result of testResults" 
        class="test-item"
        [ngClass]="getStatusClass(result.status)">
        
        <div class="test-header">
          <span class="test-icon">{{ getStatusIcon(result.status) }}</span>
          <span class="test-name">{{ result.testName }}</span>
          <span class="test-duration" *ngIf="result.duration">
            {{ result.duration }}ms
          </span>
        </div>
        
        <div class="test-message">
          {{ result.message }}
        </div>
      </div>
    </div>
  </div>

  <!-- Test Information -->
  <div class="test-info">
    <h3>What These Tests Check:</h3>
    <ul>
      <li><strong>Database Connection:</strong> Verifies Firebase connectivity and data retrieval</li>
      <li><strong>Interest Rate Loading:</strong> Tests loading of user and admin interest rates</li>
      <li><strong>Investor Data:</strong> Validates investor data structure and integrity</li>
      <li><strong>Transaction Processing:</strong> Tests transaction loading and processing</li>
      <li><strong>Compound Interest:</strong> Verifies compound interest calculation logic</li>
    </ul>
  </div>
</div>
